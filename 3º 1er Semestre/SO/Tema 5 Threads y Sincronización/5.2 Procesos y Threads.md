- THREADS:
	- Proceso: Unidad de ejecución con espacio de memoria virtual y recursos asociados
	- Thread: Proceso ligero con el que se comparte algun recurso (**SOBRE TODO EN DIRECCIONES**) pero mantiene su propio contexto de ejecución
		- ![[Pasted image 20251121112530.png]]
	- Aplicaciones multiProceso y multithread
		- Pros:
			- El thread es más rápido tanto como para crear y cambiar  
			- Modelo compartido sencillo 
			- Aprovecha el paralelismo de la CPU mejor que los procesos
		- Contrras :
			- Requieren un mecanismo de sincronización
			- Deben usar versiones thread-safe o reentrantes de las funciones de librería
			- Difícil desarrollo y depuración
			- La programación asíncrona es más eficiente para aplicaciones intensivas como en E/S
	- Comportamiento en Linux:
		- Se representan por el mismo objeto del kernel
		- Se crean con la misma llamada clone(2) especificando que recursos comparten
		- Todos los threads tienen un identificador único TID el cual coincide con el PID del task_struct y tienen el mismo thread group ID (El PID no existe hablando de threads a nivel de sistema operativo si no que es una ayuda que nos muestra el comando PS que hace que coincide con el TGID pq el primer TID que se crea del grupo tambien se asocia al PID del proceso ya que un grupo de threads lo trata como un proceso)
		- Para el thread principal TID = TGID = PID => El cual solo se muestra con el ps
		-  **API POSIX Threads**  define el un conjunto de interfaces de programación (POSIX.1) para aplicaciones multi-thread.
		- ![[Pasted image 20251121114003.png]]
	- Creación y terminación:
		- Se debe incluir la librería <pthread.h>
		- ![[Pasted image 20251121114122.png]]
		- pthread_t: Es el tipo de datos que representa al thread del proceso
			- Además de en la creación se puede obtener con pthread_self(3)
			- Tipo opaco (NO SE GUARDA COMO VARIABLE)
		- start: Funcion ejecutada por el thread void * (void * ). El thread terminará
			- Retorne de la función start
			- Llame a la función pthread_Exit(3)
			- Sea cancelado por otro thread
			- El proceso termina 
		- arg Puntero a los argumentos. Importante: El tiempo de vida debe ser igual al del thread.
	    - pthread_attr_t:
		    - Permiten fijar características sobre la planificación y terminación (ver pthread_attr_init(3))
		    
			- PTHREAD_CREATE_JOINABLE (defecto). Permite la sincronización por otros threads.
				- pthread_join(3) espera la terminación de un thread y devuelve el valor de retorno.
				- Los recursos son destruidos cuando el thread se sincroniza.

			- PTHREAD_CREATE_DETACHED
				- Cuando no es necesario controlar los threads creados.
				- Los recursos son destruidos cuando el thread termina.
    
